<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MARC21 Training Interactive</title>
<style>
body{font-family:Tahoma,Arial; margin:0; background:#f4f6fb}
header{background:#1e3a8a;color:white;padding:18px;text-align:center}
.container{max-width:1100px;margin:auto;padding:20px}
.search{width:100%;padding:12px;border-radius:10px;border:1px solid #ccc;margin-bottom:20px;font-size:16px}
.card{background:white;border-radius:14px;margin-bottom:12px;box-shadow:0 3px 10px rgba(0,0,0,.08);overflow:hidden}
.card-header{padding:14px 18px;font-weight:bold;cursor:pointer;background:#e8edff}
.card-body{display:none;padding:18px;line-height:1.8}
.tag{color:#1e40af;font-weight:bold;font-size:18px}
.lang{float:left;background:#2563eb;color:white;border:none;padding:8px 12px;border-radius:8px;cursor:pointer}
footer{text-align:center;padding:20px;color:#555}
</style>
</head>

<body>
<header>
<h1>ğŸ“š Ø§Ù„ØªØ¯Ø±ÙŠØ¨ Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠ Ù„ÙÙ‡Ù… Ø­Ù‚ÙˆÙ„ MARC21</h1>
<button class="lang" onclick="toggleLang()">English / Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</button>
</header>

<div class="container">
<input class="search" placeholder="Ø§Ø¨Ø­Ø« Ø¨Ø±Ù‚Ù… Ø§Ù„Ø­Ù‚Ù„ Ù…Ø«Ù„ 245 Ø£Ùˆ ÙƒÙ„Ù…Ø© Title" onkeyup="searchField(this.value)">
<div id="fields"></div>
</div>

<footer>
Ù…Ù„Ù ØªØ¯Ø±ÙŠØ¨ÙŠ Ø§Ø­ØªØ±Ø§ÙÙŠ â€“ ÙÙ‡Ø±Ø³Ø© Ù…Ø§Ø±Ùƒ 21<br>
Ø¥Ø¹Ø¯Ø§Ø¯: Ø¹Ù…Ø§Ø¯ ÙƒØ§Ø¸Ù… Ø§Ù„Ø³Ø¹Ø¯ÙŠ<br>
Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Â© 2024
</footer>

<script>
let lang='ar';

const marc=[
{tag:'001',en:'Control Number',ar:'Ø±Ù‚Ù… Ø§Ù„Ø¶Ø¨Ø·'},
{tag:'082',en:'Dewey Classification',ar:'ØªØµÙ†ÙŠÙ Ø¯ÙŠÙˆÙŠ'},
{tag:'100',en:'Main Author',ar:'Ø§Ù„Ù…Ø¤Ù„Ù'},
{tag:'245',en:'Title',ar:'Ø§Ù„Ø¹Ù†ÙˆØ§Ù†'},
{tag:'264',en:'Publisher',ar:'Ø§Ù„Ù†Ø§Ø´Ø±'},
{tag:'300',en:'Physical Description',ar:'Ø§Ù„ÙˆØµÙ Ø§Ù„Ù…Ø§Ø¯ÙŠ'},
{tag:'650',en:'Subject',ar:'Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹'}
];

function render(){
const container=document.getElementById('fields');
container.innerHTML='';
marc.forEach(f=>{
let card=document.createElement('div');
card.className='card';
card.innerHTML=`
<div class='card-header'><span class='tag'>${f.tag}</span></div>
<div class='card-body'>${lang==='ar'?f.ar:f.en}</div>`;
card.querySelector('.card-header').onclick=()=>{
let body=card.querySelector('.card-body');
body.style.display=body.style.display==='block'?'none':'block';
}
container.appendChild(card);
});
}

function toggleLang(){lang=lang==='ar'?'en':'ar';render();}
function searchField(q){
q=q.toLowerCase();
document.querySelectorAll('.card').forEach(c=>{
c.style.display=c.innerText.toLowerCase().includes(q)?'block':'none';
});
}
render();
</script>

<!-- ====== MARC21 Generator Lab ====== -->
<section style="margin:40px;padding:20px;border:1px solid #ddd;border-radius:14px">
<h2>Ù…Ø®ØªØ¨Ø± Ø¥Ù†Ø´Ø§Ø¡ Ø³Ø¬Ù„ MARC21</h2>

<input id="f001" placeholder="Ø±Ù‚Ù… Ø§Ù„Ø¶Ø¨Ø·"><br><br>
<input id="f100a" placeholder="Ø§Ù„Ù…Ø¤Ù„Ù"><br><br>
<input id="f245a" placeholder="Ø§Ù„Ø¹Ù†ÙˆØ§Ù†"><br><br>
<input id="f245b" placeholder="Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙØ±Ø¹ÙŠ"><br><br>
<input id="f245c" placeholder="Ø¨ÙŠØ§Ù† Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ©"><br><br>
<input id="f264b" placeholder="Ø§Ù„Ù†Ø§Ø´Ø±"><br><br>
<input id="f264c" placeholder="Ø³Ù†Ø© Ø§Ù„Ù†Ø´Ø±"><br><br>
<input id="f300a" placeholder="Ø§Ù„ÙˆØµÙ Ø§Ù„Ù…Ø§Ø¯ÙŠ"><br><br>
<input id="f650a" placeholder="Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹"><br><br>
<input id="f082a" placeholder="ØªØµÙ†ÙŠÙ Ø¯ÙŠÙˆÙŠ"><br><br>

<button onclick="generateMRK()">ØªÙˆÙ„ÙŠØ¯ MRK</button>
<button onclick="generateXML()">ØªÙˆÙ„ÙŠØ¯ XML</button>
<button onclick="copyOutput()">Ù†Ø³Ø®</button>
<button onclick="downloadFile()">ØªØ­Ù…ÙŠÙ„</button>

<textarea id="output" rows="14" style="width:100%;margin-top:10px"></textarea>
</section>

<script>
function val(id){return (document.getElementById(id).value||"").trim();}

function mrkLine(tag, ind, subs){
let line = `=${tag}  ${ind}`;
subs.forEach(s=>{ if(s.v) line += `$${s.c}${s.v}`; });
return line;
}

function generateMRK(){
const lines=[];
lines.push('=LDR  00000nam a2200000 a 4500');
if(val('f001')) lines.push(`=001  ${val('f001')}`);
if(val('f082a')) lines.push(mrkLine('082','  ',[{c:'a',v:val('f082a')}]));
if(val('f100a')) lines.push(mrkLine('100','1 ',[{c:'a',v:val('f100a')}]));
lines.push(mrkLine('245','10',[
{c:'a',v:val('f245a')},
{c:'b',v:val('f245b')},
{c:'c',v:val('f245c')}
]));
if(val('f264b')||val('f264c')) lines.push(mrkLine('264',' 1',[
{c:'b',v:val('f264b')},
{c:'c',v:val('f264c')}
]));
if(val('f300a')) lines.push(mrkLine('300','  ',[{c:'a',v:val('f300a')}]));
if(val('f650a')) lines.push(mrkLine('650',' 4',[{c:'a',v:val('f650a')}]));

document.getElementById('output').value = lines.join('\n');
window.currentFormat='mrk';
}

function generateXML(){
const xml=[];
xml.push('<?xml version="1.0" encoding="UTF-8"?>');
xml.push('<record>');
xml.push('<leader>00000nam a2200000 a 4500</leader>');
if(val('f001')) xml.push(`<controlfield tag="001">${val('f001')}</controlfield>`);
if(val('f082a')) xml.push(`<datafield tag="082"><subfield code="a">${val('f082a')}</subfield></datafield>`);
if(val('f100a')) xml.push(`<datafield tag="100"><subfield code="a">${val('f100a')}</subfield></datafield>`);
xml.push('</record>');

document.getElementById('output').value = xml.join('\n');
window.currentFormat='xml';
}

function copyOutput(){
const t=document.getElementById('output');
t.select(); document.execCommand('copy');
}

function downloadFile(){
const text=document.getElementById('output').value;
const blob=new Blob([text]);
const a=document.createElement('a');
a.href=URL.createObjectURL(blob);
a.download=window.currentFormat==='xml'?'record.xml':'record.mrk';
a.click();
}
</script>

</body>
</html>
