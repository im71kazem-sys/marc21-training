<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MARC21 Academic Trainer</title>

<style>
@import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap');

*{box-sizing:border-box}
body{
  margin:0;
  font-family:'Cairo',Tahoma;
  background:linear-gradient(135deg,#f8fafc,#eef2ff);
  color:#0f172a;
}

header{
  background:#1e3a8a;
  color:white;
  padding:25px;
  text-align:center;
  box-shadow:0 4px 12px rgba(0,0,0,.2);
}

header h1{margin:0;font-size:28px}
header p{margin-top:6px;color:#c7d2fe}

.container{
  max-width:1100px;
  margin:auto;
  padding:30px;
}

.section{
  background:white;
  border-radius:18px;
  padding:25px;
  margin-bottom:25px;
  box-shadow:0 6px 20px rgba(0,0,0,.08);
}

.section h2{
  margin-top:0;
  border-bottom:2px solid #e5e7eb;
  padding-bottom:10px;
  color:#1e3a8a;
}

.search{
  width:100%;
  padding:12px;
  border-radius:12px;
  border:1px solid #c7d2fe;
  font-size:16px;
}

.card{
  background:#f8fafc;
  border-radius:12px;
  margin-top:10px;
  border:1px solid #e5e7eb;
  overflow:hidden;
}

.card-header{
  padding:14px;
  font-weight:bold;
  cursor:pointer;
  background:#eef2ff;
  display:flex;
  justify-content:space-between;
}

.card-body{
  display:none;
  padding:14px;
  line-height:1.8;
  color:#334155;
}

.tag{
  color:#1e40af;
}

.grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(250px,1fr));
  gap:15px;
}

input{
  width:100%;
  padding:10px;
  border-radius:10px;
  border:1px solid #c7d2fe;
  font-family:'Cairo';
}

button{
  padding:10px 18px;
  border-radius:10px;
  border:0;
  font-family:'Cairo';
  cursor:pointer;
  font-weight:600;
}

.btn-primary{background:#2563eb;color:white}
.btn-success{background:#059669;color:white}
.btn-gray{background:#64748b;color:white}
.btn-dark{background:#0f172a;color:white}

textarea{
  width:100%;
  padding:12px;
  border-radius:12px;
  border:1px solid #c7d2fe;
  font-family:monospace;
  margin-top:10px;
}

footer{
  text-align:center;
  padding:20px;
  color:#475569;
}
</style>
</head>

<body>

<header>
<h1>ğŸ“˜ MARC21 Academic Training System</h1>
<p>Ù†Ø¸Ø§Ù… ØªØ¯Ø±ÙŠØ¨ÙŠ Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠ Ù„ÙÙ‡Ù… ÙˆØªÙˆÙ„ÙŠØ¯ Ø³Ø¬Ù„Ø§Øª MARC21</p>
</header>

<div class="container">

<div class="section">
<h2>ğŸ” Ø§Ø³ØªÙƒØ´Ø§Ù Ø§Ù„Ø­Ù‚ÙˆÙ„</h2>
<input class="search" placeholder="Ø§Ø¨Ø­Ø« Ø¨Ø±Ù‚Ù… Ø§Ù„Ø­Ù‚Ù„ Ø£Ùˆ Ø§Ù„ÙƒÙ„Ù…Ø©" onkeyup="searchField(this.value)">
<div id="fields"></div>
</div>

<div class="section">
<h2>ğŸ§ª Ù…Ø®ØªØ¨Ø± Ø¥Ù†Ø´Ø§Ø¡ Ø³Ø¬Ù„ MARC21</h2>

<div class="grid">
<input id="f001" placeholder="001 Ø±Ù‚Ù… Ø§Ù„Ø¶Ø¨Ø·">
<input id="f100a" placeholder="100$a Ø§Ù„Ù…Ø¤Ù„Ù">
<input id="f245a" placeholder="245$a Ø§Ù„Ø¹Ù†ÙˆØ§Ù†">
<input id="f245b" placeholder="245$b Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙØ±Ø¹ÙŠ">
<input id="f245c" placeholder="245$c Ø¨ÙŠØ§Ù† Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ©">
<input id="f264b" placeholder="264$b Ø§Ù„Ù†Ø§Ø´Ø±">
<input id="f264c" placeholder="264$c Ø³Ù†Ø© Ø§Ù„Ù†Ø´Ø±">
<input id="f300a" placeholder="300$a Ø§Ù„ÙˆØµÙ Ø§Ù„Ù…Ø§Ø¯ÙŠ">
<input id="f650a" placeholder="650$a Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹">
<input id="f082a" placeholder="082$a ØªØµÙ†ÙŠÙ Ø¯ÙŠÙˆÙŠ">
</div>

<div style="margin-top:15px;display:flex;gap:10px;flex-wrap:wrap">
<button class="btn-primary" onclick="generateMRK()">ØªÙˆÙ„ÙŠØ¯ MRK</button>
<button class="btn-success" onclick="generateXML()">ØªÙˆÙ„ÙŠØ¯ XML</button>
<button class="btn-gray" onclick="copyOutput()">Ù†Ø³Ø®</button>
<button class="btn-dark" onclick="downloadFile()">ØªØ­Ù…ÙŠÙ„</button>
</div>

<textarea id="output" rows="12" placeholder="Ø³ÙŠØ¸Ù‡Ø± Ø§Ù„Ø³Ø¬Ù„ Ù‡Ù†Ø§..."></textarea>
</div>

</div>

<footer>
Ù†Ø¸Ø§Ù… ØªØ¯Ø±ÙŠØ¨ÙŠ Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠ â€“ ÙÙ‡Ø±Ø³Ø© Ù…Ø§Ø±Ùƒ 21<br>
Ø¥Ø¹Ø¯Ø§Ø¯: Ø¹Ù…Ø§Ø¯ ÙƒØ§Ø¸Ù… Ø§Ù„Ø³Ø¹Ø¯ÙŠ â€“ 2024
</footer>

<script>
let lang='ar';

const marc=[
{tag:'001',en:'Control Number',ar:'Ø±Ù‚Ù… Ø§Ù„Ø¶Ø¨Ø·'},
{tag:'082',en:'Dewey Classification',ar:'ØªØµÙ†ÙŠÙ Ø¯ÙŠÙˆÙŠ'},
{tag:'100',en:'Main Author',ar:'Ø§Ù„Ù…Ø¤Ù„Ù'},
{tag:'245',en:'Title Statement',ar:'Ø¨ÙŠØ§Ù† Ø§Ù„Ø¹Ù†ÙˆØ§Ù†'},
{tag:'264',en:'Publication Info',ar:'Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù†Ø´Ø±'},
{tag:'300',en:'Physical Description',ar:'Ø§Ù„ÙˆØµÙ Ø§Ù„Ù…Ø§Ø¯ÙŠ'},
{tag:'650',en:'Subject Heading',ar:'Ø±Ø£Ø³ Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹'}
];

function render(){
const container=document.getElementById('fields');
container.innerHTML='';
marc.forEach(f=>{
let card=document.createElement('div');
card.className='card';
card.innerHTML=`
<div class="card-header">
<span class="tag">${f.tag}</span>
<span>Ø§Ø¶ØºØ· Ù„Ù„Ø´Ø±Ø­</span>
</div>
<div class="card-body">${lang==='ar'?f.ar:f.en}</div>`;
card.querySelector('.card-header').onclick=()=>{
let body=card.querySelector('.card-body');
body.style.display=body.style.display==='block'?'none':'block';
}
container.appendChild(card);
});
}

function searchField(q){
q=q.toLowerCase();
document.querySelectorAll('.card').forEach(c=>{
c.style.display=c.innerText.toLowerCase().includes(q)?'block':'none';
});
}

render();

function val(id){return (document.getElementById(id).value||"").trim();}

function mrkLine(tag, ind, subs){
let line = `=${tag}  ${ind}`;
subs.forEach(s=>{ if(s.v) line += `$${s.c}${s.v}`; });
return line;
}

function generateMRK(){
const lines=[];
lines.push('=LDR  00000nam a2200000 a 4500');
if(val('f001')) lines.push(`=001  ${val('f001')}`);
if(val('f082a')) lines.push(mrkLine('082','  ',[{c:'a',v:val('f082a')}]));
if(val('f100a')) lines.push(mrkLine('100','1 ',[{c:'a',v:val('f100a')}]));
lines.push(mrkLine('245','10',[
{c:'a',v:val('f245a')},
{c:'b',v:val('f245b')},
{c:'c',v:val('f245c')}
]));
if(val('f264b')||val('f264c')) lines.push(mrkLine('264',' 1',[
{c:'b',v:val('f264b')},
{c:'c',v:val('f264c')}
]));
if(val('f300a')) lines.push(mrkLine('300','  ',[{c:'a',v:val('f300a')}]));
if(val('f650a')) lines.push(mrkLine('650',' 4',[{c:'a',v:val('f650a')}]));

document.getElementById('output').value = lines.join('\n');
window.currentFormat='mrk';
}

function generateXML(){
const xml=[];
xml.push('<?xml version="1.0" encoding="UTF-8"?>');
xml.push('<record>');
xml.push('<leader>00000nam a2200000 a 4500</leader>');
if(val('f001')) xml.push(`<controlfield tag="001">${val('f001')}</controlfield>`);
if(val('f082a')) xml.push(`<datafield tag="082"><subfield code="a">${val('f082a')}</subfield></datafield>`);
if(val('f100a')) xml.push(`<datafield tag="100"><subfield code="a">${val('f100a')}</subfield></datafield>`);
xml.push('</record>');

document.getElementById('output').value = xml.join('\n');
window.currentFormat='xml';
}

function copyOutput(){
const t=document.getElementById('output');
t.select(); document.execCommand('copy');
}

function downloadFile(){
const text=document.getElementById('output').value;
const blob=new Blob([text]);
const a=document.createElement('a');
a.href=URL.createObjectURL(blob);
a.download=window.currentFormat==='xml'?'record.xml':'record.mrk';
a.click();
}
</script>

</body>
</html>
